<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link rel="icon"
        href="data:image/png;base64,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" />
    <title>妹子图</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>

<body>
    <div class="title-container">
        <h1 id="pictitle" class="text-center">IMG</h1>
    </div>

    <div class="container">
        <div class="row" id="imageContainer"></div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", async () => {
            const response = await fetch("http://localhost:3000/nsfw");
            const imagePaths = await response.json();

            const title = document.getElementById("pictitle");
            const container = document.getElementById("imageContainer");
            const fragment = document.createDocumentFragment();

            title.textContent = imagePaths[0].name;
            const urlArray = imagePaths[0].urls.split(',');

            const options = {
                root: null,
                rootMargin: "0px",
                threshold: 0.1
            };
            const lazyLoadImage = (entries, observer) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src;
                        img.classList.remove("lazyload");
                        observer.unobserve(img);
                    }
                });
            };
            const observer = new IntersectionObserver(lazyLoadImage, options);
            urlArray.forEach((path) => {
                const div = document.createElement("div");
                div.className = "col-md-4 mb-3";
                const imgLink = document.createElement("a");
                imgLink.href = `https://tgproxy.pages.dev${path}`;
                const img = document.createElement("img");
                img.dataset.src = `https://tgproxy.pages.dev${path}`;
                img.alt = path;
                img.className = "img-fluid lazyload";
                imgLink.appendChild(img);
                div.appendChild(imgLink);
                fragment.appendChild(div);
                observer.observe(img);
            });
            container.appendChild(fragment);
        });

    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
